//------------------------------------------------------------------------------
// This is Open source software. You can place this code on your site, but don't
// forget a link to my YouTube-channel: https://www.youtube.com/channel/UChButpZaL5kUUl_zTyIDFkQ
// ��� ����������� ����������� ���������������� ��������. �� ������ ���������
// ��� �� ����� �����, �� �� �������� ������� ������ �� ��� YouTube-����� 
// "����������� � ���������" https://www.youtube.com/channel/UChButpZaL5kUUl_zTyIDFkQ
// �����: �������� ������ / Nadyrshin Ruslan
//------------------------------------------------------------------------------
#include "CMSIS/Core/CM3/stm32f10x.h" // include in ips_st77xx_stm32.ino
#include "STM32F10x_StdPeriph_Driver/inc/stm32f10x_gpio.h"
#include "gpio/gpio.h"
//#include <delay.h> // include in main.c
#include "button.h"


//==============================================================================
// ��������� ������������� ���� GPIO ��� ����������� ������
//==============================================================================
void button_Init()
{
  // ������������� ����� ��� �������� � ����� �������� ����� ����������
  gpio_PortClockStart(TestButton_Port);
  gpio_SetGPIOmode_In(TestButton_Port, TestButton_Pin, gpio_PullUp);
}
//==============================================================================


//==============================================================================
// ������� ������ ��������� ������
//==============================================================================
uint8_t button_GetState(void)
{
  return GPIO_ReadInputDataBit(TestButton_Port, TestButton_Pin);
}
//==============================================================================


//==============================================================================
// ��������� �������� ������� (� ����������) ������
//==============================================================================
void button_WaitPress(void)
{
  // ��� ������� ������ ����� ����������� �������
  while (!button_GetState())
    delay_ms(100);
  
  // ��� ������� ������
  while (button_GetState())
    delay_ms(100);
}
//==============================================================================
